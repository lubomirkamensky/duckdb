# https://towardsdatascience.com/how-to-deploy-dbt-to-production-using-github-action-778bf6a1dff6
name: pr_to_main

on:
  push:
    branches:
      - main
env:
  DBT_PROFILES_DIR: ./

jobs:
  pr_to_main:
    name: pr_to_main
    runs-on: ubuntu-latest

    permissions:
      contents: read
      actions: read
      packages: write

    steps:
      - name: Check out
        uses: actions/checkout@master

      - name: DuckDB setup
        uses: opt-nc/setup-duckdb-action@v1.0.8

      - name: dbt-action
        uses: mwhitaker/dbt-action@master

      - name: Run dbt build
        run: dbt build

